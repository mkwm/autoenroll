<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Statystyki zapisów</title>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.2/slate/bootstrap.min.css">
<link rel="stylesheet" href="static/stats.css">
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<a class="navbar-brand" href="#">Statystyki zapisów</a>
</div>
<p class="navbar-text navbar-right hidden-xs hidden-sm"><strong>Ostatnia aktualizacja:</strong> {{ now.strftime('%d.%m.%Y, %H:%M:%S') }}</p>
</div>
</nav>
<div class="container">
{% for subject, terms in terms_by_subject|dictsort %}
<div class="row">
<h2 class="text-center">{{ subject.name }}</h2>
{% for term in terms|sort %}
<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
<div class="text-center">
<p>{{ term.date.strftime('%a, %H:%M') }} {{ term.year if term.year }}<br>({{ term.teacher.short_name }})</p>
{% set percentage = (terms_max_preciousness[term.id] / term.max_people * 100)|round(2) %}
<p class="text-muted">{{ terms_max_preciousness[term.id] }}/{{ term.max_people }} ({{ percentage }}%)</p>
<div class="progress">
{% if percentage < 100 %}
<div class="progress-bar progress-bar-success" style="width: {{ percentage / 4 }}%;"></div>
<div class="progress-bar" style="width: {{ (100 - percentage) / 4 }}%;"></div>
{% elif percentage|round|int == 100 %}
<div class="progress-bar progress-bar-info" style="width: 25%;"></div>
{% elif percentage < 200 %}
<div class="progress-bar progress-bar-warning" style="width: 25%;"></div>
<div class="progress-bar progress-bar-warning progress-bar-striped" style="width: {{ (percentage - 100) / 100 * 25 }}%;"></div>
{% else %}
<div class="progress-bar progress-bar-danger" style="width: 25%;"></div>
{% if percentage < 400 %}
<div class="progress-bar progress-bar-danger progress-bar-striped" style="width: {{ 25 + (percentage - 200) / 200 * 25 }}%;"></div>
{% else %}
{% if percentage > 800 %}
{% set percentage = 800 %}
{% endif %}
<div class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{ 50 + (percentage - 400) / 400 * 25 }}%;"></div>
{% endif %}
{% endif %}
</div>
<div class="scale text-muted"><div class="threshold" threshold="100"></div><div class="threshold" threshold="200"></div><div class="threshold" threshold="400"></div><div class="threshold" threshold="800"></div></div>
</div>
</div>
{% endfor %}
</div>
<hr>
{% endfor %}
</div>
</body>
</html>
